<div class="grid">
  <div class="col-12 lg:col-1 xl:col-1 md:col-1"></div>
  <div class="col-12 lg:col-10 xl:col-12">
    <div class="memberDetailCard">

      <!-- Industry Selection -->
      <div class="col-12 sm:col-5 md:col-5 lg:col-5 xl:col-5 mb-3">
        <div class="input-control-container">
          <label class="input-form-label">
            Industry&nbsp;<span class="text-danger">*</span>
          </label>
          <p-dropdown class="w-full flex css" styleClass="w-full" placeholder="Select Industry" [filter]="true"
            filterBy="CodeDesc" [(ngModel)]="productItem.IndustryId" (onChange)="IndustryChanged()"
            [options]="industryTypeList" appendTo="body" optionLabel="CodeDesc" optionValue="Code">
          </p-dropdown>
        </div>
        <div class="error-text text-danger" *ngIf="IndustryError">
          Please Select Industry
        </div>
      </div>

      <!-- Liability Table -->
      <p-table [value]="productItem.LiabilityList" class="custom-header" [responsiveLayout]="'scroll'">
        <ng-template pTemplate="header">
          <tr>
            <th>Liability Type</th>
            <th>Description</th>
            <th>Sum Insured</th>
            <th style="width: 50px;"></th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-entry let-i="rowIndex">
          <tr>
            <td class="px-0">
              <p-dropdown class="w-full flex css" styleClass="w-full" placeholder="Select Type" [filter]="true"
                filterBy="CodeDesc" [(ngModel)]="entry.CategoryId" (onChange)="onChangeLiability(entry)"
                [options]="publicLiabilityList" appendTo="body" optionLabel="CodeDesc" optionValue="Code">
              </p-dropdown>
            </td>

            <td>
              <input class="w-full p-button-outlined" [disabled]="endorsementSection && endorsementSectionId!='54'"
                placeholder="Enter Description" [(ngModel)]="entry.DescriptionOfRisk" pInputText type="text" />
            </td>

            <td>
              <input class="w-full p-button-outlined" (keydown)="onSIValueChange($event)"
                (keyup)="CommaFormattedCorp(entry,'Liability')" placeholder="Enter Sum Insured"
                [(ngModel)]="entry.SumInsured" pInputText type="text" />
            </td>

            <td>
              <button pButton type="button" icon="pi pi-trash" (click)="deleteRow(productItem,i,'Liability')"
                styleClass="p-button-outlined p-button-danger p-button-sm">
              </button>
            </td>
          </tr>
        </ng-template>
      </p-table>

      <!-- Formly Forms -->
      <div class="mt-5">
        <form [formGroup]="form">
          <formly-form [form]="form" [fields]="publicFields" [model]="productItem"></formly-form>
        </form>

        <form [formGroup]="form">
          <formly-form [form]="form" [fields]="IndemityRevenue" [model]="productItem"></formly-form>
        </form>
      </div>

      <!-- Extensions Toggle -->
      <div class="flex justify-content-center align-items-center my-4">
        <label class="mr-3 font-medium">Extensions</label>
        <p-selectButton [options]="[{label: 'Yes', value: true}, {label: 'No', value: false}]"
          [(ngModel)]="showExtensions" [ngModelOptions]="{standalone: true}" optionLabel="label" optionValue="value"
          class="p-button-sm">
        </p-selectButton>
      </div>

      <!-- Extensions Form -->
      <div *ngIf="showExtensions" class="mt-3">
        <form [formGroup]="form2">
          <formly-form [form]="form2" [fields]="publicextentionsField" [model]="productItem"></formly-form>
        </form>
      </div>
    </div>
    <div class="text-center" *ngIf="productId!='92'">
      <p-button styleClass="p-button-outlined" label="Back" size="small"
        [routerLink]="['/quotation/plan/quote-details']" routerLinkActive="router-link-active"></p-button>&nbsp;
      <p-button label="Previous" *ngIf="locationList.length>1 && (tabIndex!=0)" (click)="onProceedData('Previous')"
        size="small" class="mr-4 text-l mr-0" styleClass="p-button-outlined" icon="pi pi-chevron-left"></p-button>
      <p-button label="Next" size="small" *ngIf="locationList.length>1 && (tabIndex+1)!=locationList.length"
        (click)="onProceedData('Next')"></p-button>&nbsp;
      <p-button label="Proceed" size="small" (click)="onProceedData('Submit')"></p-button>
    </div>
    <div class="text-center mt-2" *ngIf="productId=='92'">
      <p-button class="mr-2" label="Previous" size="small" (click)="previous()"></p-button>
      <p-button class="mr-2" label="Skip" size="small" (click)="skip()"></p-button>
      <p-button class="mr-2" label="Save & Proceed" size="small" (click)="onProceedData('packageData')"></p-button>
    </div>
  </div>
</div>